---
layout: post
title: 汇编基础
category: 汇编
tags: 汇编
keywords: 汇编基本语法及CPU结构基础知识
description: 
---

## 1. CPU 
### 1.1 发展历史
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; {{{1}}}">
   <tbody>
      <tr>
		 <th> 发布年份</th>
         <th> 型号</th>
         <th> 通用寄存器位数</th>
         <th> 特性及说明</th>
      </tr>
      <tr>
		 <td> 1978</td>
         <td> 8086</td>
         <td> 16</td>
         <td> 内存分段:外部地址总线20位,支持1M(2^20)的寻址,但由于寄存器只有16bit，所以寻址机制为段寻址,计算公式:段寄存器(DS)*16+offset(2^16)组成,也就是说内存页面最大为64Kb</td>
      </tr>
      <tr>
         <td> 1982</td>
         <td> 80286</td>
         <td> 16</td>
         <td> 地址总线24位,段寻址模式;实模式(限定访问内存大小位1M)和保护模式(全部16M内存);支持基于段的虚拟内存交换</td>
      </tr>
      <tr>
         <td> 1985</td>
         <td> 80386</td>
         <td> 32</td>
         <td> 对寄存器进行了扩展,低位16bit为原来的寄存器;32位地址总线(4GB寻址),增加flat寻址模式(不使用段寄存器进行寻址);内存分页固定为4K;支持指令</td>
      </tr>
	  <tr>
         <td> 2008</td>
         <td> i7 family</td>
         <td> 64</td>
         <td> / </td>
      </tr>
   </tbody>
</table>
### 1.2 寄存器
#### 1.2.1 16位CPU 寄存器
#### 1.2.1.1 通用寄存器总览
![1](/public/img/hardware/CPUregisters.png)

1. AX(AH,AL:16): 通常称为累加器(Accumulator),用累加器进行的操作可能需要更少时间。可用于乘、除、输入/输出等操作，使用频率很高；
2. BX(BH,BL:16): 
3. CX(CH,CL:16):
4. DX(DH,DL:16):
5. SP(:16): 和SS
6. BP(:16):
7. SI(:16):
8. DI(:16):

#### 1.2.1.2 段寄存器(SEGMENT REGISTER)
1. CS: 代码段寄存器,IP是用来存放下条待执行的指令在该段的偏移量,也就是说在任意时刻CPU把CS:IP指向的内容当成指令执行
2. DS: 数据段寄存器,在存取操作数时，二者之一和一个偏移量合并就可得到存储单元的物理地址
3. SS: 堆栈段寄存器,SP是用来指向该堆栈的栈顶，把它们合在一起可访问栈顶单元;另外,当偏移量用到了指针寄存器BP,则其缺省的段寄存器也是SS,并且用BP可访问整个堆栈，不仅仅是只访问栈顶。
4. ES: 附加段寄存器
#### 1.2.3 控制寄存器
1. IP: 
2. FLAGS:
## 1. 汇编产生的背景
 主要原因在于机器码实在难于解读编写维护,把特定的字节序列用助记符号替换后就是汇编的主要原理，这些助记符就是汇编指令.
## 2. 汇编指令的分类
1. 汇编指令:存在具体的机器码与之对应;
2. 伪指令：主要是写给汇编编译器看的,用于指示汇编编译器做某些特定的操作，最终生成的机器码中并没有这些指令存在

## 3. CPU如何读取数据
### 3.1 CPU总线结构(实际就是多根导线并联)
1. 数据总线: 数据读写,数据总线宽度是8的倍数
2. 地址总线: 地址总线决定CPU的寻址能力,32位CPU的寻址空间为0-2^32-1
3. 控制总线：控制指令的传入
### 3.2 读取写数据的流程
1. CPU 通过地址总线将地址发出;
2. CPU 通过控制总线选择存储设备,发出数据读写的命令;
3. 存储设备将相应地址的数据通过数据总线送回到CPU(读取)\CPU通过数据总线写入数据到相应的地址(写入)
## 4. CPU的工作机制
### 4.1 内部部件及用途
1. 运算器: 数据处理
2. 控制器: 数据存储
3. 寄存器: 控制部件工作
4. 内部总线: 互联及数据传送
### 4.2 通用寄存器
1. 加法寄存器()
2. 